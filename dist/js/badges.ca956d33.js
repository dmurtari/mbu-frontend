(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["badges"],{"0fb2":function(e,t,a){},a370:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h3",{staticClass:"title is-3"},[e._v("\n    All Badges ("+e._s(e.totalBadges)+" Total)\n  ")]),e.error?a("closable-error",[e._v(e._s(e.error))]):e._e(),e.loading?a("spinner-page"):a("div",[e.isAdmin&&!e.displayAddBadge?a("button",{staticClass:"button is-primary",on:{click:function(t){e.toggleAdd()}}},[e._v("\n      Add a Badge\n    ")]):e._e(),a("badge-create",{directives:[{name:"show",rawName:"v-show",value:e.displayAddBadge,expression:"displayAddBadge"}],on:{close:function(t){e.toggleAdd()}}}),a("div",{staticClass:"badge-list"},[e.badges.length<1?a("span",[a("div",{staticClass:"notification"},[a("p",[e._v("\n            No badges have been added yet.\n            "),e.isAdmin?a("span",[a("br"),e._v(" You will not be able to create any merit badge offerings for an\n              event until you add badges.\n              "),e.displayAddBadge?e._e():a("a",{on:{click:function(t){t.preventDefault(),e.toggleAdd()}}},[e._v("\n                Add the first badge?\n              ")])]):e._e()])])]):e._e(),e._l(e.badges,function(e){return a("badge",{key:e.id,attrs:{badge:e}})})],2)],1)],1)},s=[],n=a("c93e"),d=a("2f62"),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("h4",{staticClass:"title is-4"},[e._v(e._s(e.badge.name)+"\n    "),e.isAdmin?a("button",{staticClass:"button edit-button is-pulled-right",on:{click:function(t){e.toggleEdit()}}},[a("span",{staticClass:"fa fa-edit",attrs:{"aria-label":"Edit"}})]):e._e()]),e.displayEditBadge?e._e():a("badge-detail",{attrs:{badge:e.badge}}),e.displayEditBadge?a("badge-edit",{attrs:{badge:e.badge},on:{close:function(t){e.toggleEdit()}}}):e._e()],1)},r=[],l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("p",[e._v(e._s(e.badge.description))]),e.badge.notes?a("p",[a("br"),a("b",[e._v("Notes:")]),e._v(" "+e._s(e.badge.notes)+"\n  ")]):e._e()])},c=[],g={props:{badge:{type:Object,required:!0}}},u=g,b=a("2877"),p=Object(b["a"])(u,l,c,!1,null,null,null);p.options.__file="Detail.vue";var v=p.exports,m=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.showDeleteConfirmation?e._e():a("form",[a("div",{staticClass:"columns is-multiline"},[a("div",{staticClass:"field column is-4"},[a("label",{staticClass:"label",attrs:{for:"badge-edit-name"}},[e._v("Name")]),a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.badgeUpdate.name,expression:"badgeUpdate.name"}],staticClass:"input",class:{"is-danger":e.$v.badgeUpdate.name.$error},attrs:{type:"text",id:"badge-edit-name",placeholder:"New Badge"},domProps:{value:e.badgeUpdate.name},on:{blur:e.$v.badgeUpdate.name.$touch,input:function(t){t.target.composing||e.$set(e.badgeUpdate,"name",t.target.value)}}})]),e.$v.badgeUpdate.name.$error?a("span",{staticClass:"help is-danger"},[e._v("\n          The name of the merit badge is required\n        ")]):e._e()]),a("div",{staticClass:"field column is-8"},[a("label",{staticClass:"label",attrs:{for:"badge-edit-notes"}},[e._v("Notes")]),a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.badgeUpdate.notes,expression:"badgeUpdate.notes"}],staticClass:"input",attrs:{type:"text",id:"badge-edit-notes",placeholder:"Notes about this badge"},domProps:{value:e.badgeUpdate.notes},on:{input:function(t){t.target.composing||e.$set(e.badgeUpdate,"notes",t.target.value)}}})])]),a("div",{staticClass:"field column"},[a("label",{staticClass:"label",attrs:{for:"badge-edit-description"}},[e._v("Description")]),a("div",{staticClass:"control"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.badgeUpdate.description,expression:"badgeUpdate.description"}],staticClass:"textarea",attrs:{id:"badge-edit-description",rows:"5",placeholder:"Description of this badge"},domProps:{value:e.badgeUpdate.description},on:{input:function(t){t.target.composing||e.$set(e.badgeUpdate,"description",t.target.value)}}})])])]),a("div",{staticClass:"field is-grouped"},[a("div",{staticClass:"control"},[a("button",{staticClass:"button is-primary",class:{"is-loading":e.saving},attrs:{disabled:e.$v.badgeUpdate.$invalid||e.saving},on:{click:function(t){t.preventDefault(),e.updateBadge()}}},[e._v("Save Changes")])]),a("div",{staticClass:"control"},[a("button",{staticClass:"button",attrs:{disabled:e.saving},on:{click:function(t){t.preventDefault(),e.close()}}},[e._v("Cancel")])]),a("div",{staticClass:"control is-pulled-right"},[a("button",{staticClass:"button is-danger",attrs:{disabled:e.saving},on:{click:function(t){t.preventDefault(),e.showDeleteConfirm()}}},[e._v("Delete Badge")])])])]),e.showDeleteConfirmation?a("confirm-delete",{attrs:{"match-text":this.badge.name,placeholder:"Badge Name"},on:{deleteSuccess:function(t){e.deleteBadge()},close:function(t){e.hideDeleteConfirm()}}},[a("span",{attrs:{slot:"header"},slot:"header"},[e._v("\n      Do you really want to delete this badge? This cannot be undone, and will likely break\n      existing registration records!\n    ")]),a("span",{attrs:{slot:"help-text"},slot:"help-text"},[e._v("\n      Enter the full name of this badge with correct capitalization to confirm that you\n      wish to delete this badge.\n      "),a("b",[e._v("This action cannot be undone, and will delete all associated completion records\n        and badge requests!")])])]):e._e()],1)},h=[],f=(a("7f7f"),a("b5ae")),C={props:{badge:{type:Object,required:!0}},data:function(){return{error:"",showDeleteConfirmation:!1,badgeUpdate:{name:"",description:"",notes:""},saving:!1}},methods:{updateBadge:function(){var e=this;this.saving=!0;var t={name:this.badgeUpdate.name,description:this.badgeUpdate.description,notes:this.badgeUpdate.notes};t.id=this.badge.id,this.$store.dispatch("updateBadge",t).then(function(){return e.$store.dispatch("getBadges")}).then(function(){e.close()}).catch(function(t){e.error="Error updating badge, please try again. Name is required."}).then(function(){e.saving=!1})},deleteBadge:function(){var e=this;this.$store.dispatch("deleteBadge",this.badge.id).then(function(){e.$store.dispatch("getBadges"),e.$emit("close")}).catch(function(){e.error="There was a problem deleting this badge."})},showDeleteConfirm:function(){this.showDeleteConfirmation=!0},hideDeleteConfirm:function(){this.showDeleteConfirmation=!1},close:function(){this.$emit("close")}},mounted:function(){this.badgeUpdate.name=this.badge.name,this.badgeUpdate.description=this.badge.description,this.badgeUpdate.notes=this.badge.notes},validations:{badgeUpdate:{name:{required:f["required"]}}}},$=C,w=Object(b["a"])($,m,h,!1,null,null,null);w.options.__file="Edit.vue";var B=w.exports,y={props:{badge:{required:!0,type:Object}},data:function(){return{displayEditBadge:!1}},computed:Object(n["a"])({},Object(d["b"])(["isAdmin"])),methods:{toggleEdit:function(){this.displayEditBadge=!this.displayEditBadge}},components:{"badge-detail":v,"badge-edit":B}},x=y,U=(a("f9a3"),Object(b["a"])(x,o,r,!1,null,"63a8e83a",null));U.options.__file="Badge.vue";var A=U.exports,D=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("h4",{staticClass:"title is-4"},[e._v("Add a New Merit Badge")]),a("p",[e._v("\n    Fill out the information below to add a new merit badge. Note that this will not\n    be associated with any events (go to\n    "),a("router-link",{attrs:{to:"/administration"}},[e._v(" the administration page")]),e._v("\n    to manage merit badge offerings).\n  ")],1),a("br"),e.error?a("div",{staticClass:"notification is-danger"},[a("p",[e._v("\n      "+e._s(e.error)+"\n    ")])]):e._e(),a("form",[a("div",{staticClass:"columns is-multiline"},[a("div",{staticClass:"field column is-4"},[a("label",{staticClass:"label",attrs:{for:"badge-create-name"}},[e._v("Name")]),a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.badge.name,expression:"badge.name"}],staticClass:"input",class:{"is-danger":e.$v.badge.name.$error},attrs:{type:"text",id:"badge-create-name",placeholder:"New Badge"},domProps:{value:e.badge.name},on:{blur:e.$v.badge.name.$touch,input:function(t){t.target.composing||e.$set(e.badge,"name",t.target.value)}}})]),e.$v.badge.name.$error?a("span",{staticClass:"help is-danger"},[e._v("\n          The name of the merit badge is required\n        ")]):e._e()]),a("div",{staticClass:"field column is-8"},[a("label",{staticClass:"label",attrs:{for:"badge-create-notes"}},[e._v("Notes")]),a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.badge.notes,expression:"badge.notes"}],staticClass:"input",attrs:{type:"text",id:"badge-create-notes",placeholder:"Notes about this badge"},domProps:{value:e.badge.notes},on:{input:function(t){t.target.composing||e.$set(e.badge,"notes",t.target.value)}}})])]),a("div",{staticClass:"field column is-12"},[a("label",{staticClass:"label",attrs:{for:"badge-create-description"}},[e._v("Description")]),a("div",{staticClass:"control"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.badge.description,expression:"badge.description"}],staticClass:"textarea",attrs:{id:"badge-create-description",rows:"5",placeholder:"Description of this badge"},domProps:{value:e.badge.description},on:{input:function(t){t.target.composing||e.$set(e.badge,"description",t.target.value)}}})])])]),a("div",{staticClass:"field is-grouped"},[a("div",{staticClass:"control"},[a("button",{staticClass:"button is-primary",class:{"is-loading":e.creating},attrs:{disabled:e.$v.$invalid||e.creating},on:{click:function(t){t.preventDefault(),e.createBadge()}}},[e._v("Create Badge")])]),a("div",{staticClass:"control"},[a("button",{staticClass:"button",attrs:{disabled:e.creating},on:{click:function(t){t.preventDefault(),e.clearAndClose()}}},[e._v("Cancel")])])])])])},N=[],E=(a("ac6a"),{data:function(){return{error:"",badge:{name:"",description:"",notes:""},creating:!1}},methods:{createBadge:function(){var e=this;this.creating=!0;var t={name:this.badge.name,description:this.badge.description,notes:this.badge.notes};this.$store.dispatch("addBadge",t).then(function(){return e.$store.dispatch("getBadges")}).then(function(){e.$v.$reset(),e.clearAndClose()}).catch(function(t){e.error="Error creating badge, please refresh the page and try again"}).then(function(){e.creating=!1})},clearAndClose:function(){var e=this;_.forEach(this.badge,function(t,a){e.badge[a]=""}),this.error="",this.close()},close:function(){this.$emit("close")}},validations:{badge:{name:{required:f["required"]}}}}),k=E,j=Object(b["a"])(k,D,N,!1,null,null,null);j.options.__file="Create.vue";var O=j.exports,q=a("1721"),P={data:function(){return{error:"",loading:!1,displayAddBadge:!1}},computed:Object(n["a"])({},Object(d["b"])(["isAdmin","badges"]),{totalBadges:function(){return this.badges.length}}),methods:{toggleAdd:function(){this.displayAddBadge=!this.displayAddBadge}},components:{Badge:A,BadgeCreate:O,ClosableError:q["a"]},created:function(){var e=this;this.loading=!0,this.$store.dispatch("getBadges").then(function(){e.error=""}).catch(function(){e.error="Failed to load badges"}).then(function(){e.loading=!1})}},T=P,F=(a("eea5"),Object(b["a"])(T,i,s,!1,null,null,null));F.options.__file="List.vue";t["default"]=F.exports},ea0e:function(e,t,a){},eea5:function(e,t,a){"use strict";var i=a("ea0e"),s=a.n(i);s.a},f9a3:function(e,t,a){"use strict";var i=a("0fb2"),s=a.n(i);s.a}}]);
//# sourceMappingURL=badges.ca956d33.js.map