(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["scouts"],{2682:function(t,e,n){},"4a2c":function(t,e,n){"use strict";var s=n("9bc6"),i=n.n(s);i.a},"56b9":function(t,e,n){"use strict";var s=n("2682"),i=n.n(s);i.a},"56c4":function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h4",{staticClass:"title is-4"},[t._v("Event Attendances")]),n("p",[t._v("\n    Use this page to view and manage scouts' event attendance information, such as editing\n    class assignments and viewing totals due for each scout. You can also view attendance\n    and price information for a specific troop by selecting that troop from the dropdown.\n  ")]),n("stats-list",{attrs:{"list-link":"list","detail-link":"detail"}})],1)},i=[],r=n("f4c8"),a={components:{StatsList:r["a"]}},o=a,c=n("2877"),u=Object(c["a"])(o,s,i,!1,null,null,null);e["default"]=u.exports},"7e7b":function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b",[t._v("Assign Merit Badges")]),n("p",[t._v("\n    Assign Merit Badges for "+t._s(t.scout.fullname)+" for MBU "+t._s(t.event.semester)+" "+t._s(t.event.year)+" here. Select\n    a merit badge from the dropdown for each period. Merit Badges that are not offered for that period\n    are grayed out.\n  ")]),n("br"),n("p",[t._v("\n    "+t._s(t.scout.fullname)+" has listed as their preferences:\n  ")]),n("ul",t._l(t.preferences,function(e){return n("li",{key:e.offering_id},[t._v("\n      "+t._s(e.details.rank)+": "+t._s(e.badge.name)+"\n      "),"0.00"!==e.price?n("span",[t._v("\n        ("+t._s(t._f("currency")(e.price))+")\n      ")]):t._e()])}),0),n("form",{staticClass:"form"},[n("div",{staticClass:"columns"},t._l(3,function(e){return n("div",{key:e,staticClass:"field column is-4"},[n("label",{staticClass:"label",attrs:{for:"period-1-assignment"}},[t._v("Period "+t._s(e)+":")]),n("div",{staticClass:"control"},[n("span",{staticClass:"input-group select"},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.assignments[e-1],expression:"assignments[n - 1]"}],staticClass:"input",attrs:{id:"period-"+e+"-assignment"},on:{change:[function(n){var s=Array.prototype.filter.call(n.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.assignments,e-1,n.target.multiple?s:s[0])},function(n){return t.maybeRespondToDuration(n.target.value,e)}]}},[n("option",{domProps:{value:null}},[t._v("No Assignment")]),n("option",{attrs:{disabled:""}}),n("optgroup",{attrs:{label:"Preferences"}},t._l(t.preferences,function(s){return n("option",{key:s.offering_id,attrs:{disabled:!t.offered(s.offering_id,e)||t.classFull(s.offering_id,e)},domProps:{value:s.offering_id}},[t._v("\n                  "+t._s(s.badge.name)+"\n                  "),"0.00"!==s.price?n("span",[t._v("\n                    ("+t._s(t._f("currency")(s.price))+")\n                  ")]):t._e(),s.duration>1?n("span",[t._v("\n                    ("+t._s(s.duration)+" periods)\n                  ")]):t._e(),t.sizeInfoForOffering(t.event.id,s.offering_id)?n("span",[t._v("\n                    ("+t._s(t.sizeInfoText(s.offering_id,e))+")\n                  ")]):t._e()])}),0),n("option",{attrs:{disabled:""}}),n("optgroup",{attrs:{label:"All Offerings"}},t._l(t.sortedOfferings,function(s){return n("option",{key:s.details.id,attrs:{disabled:!t.offered(s.details.id,e)||t.classFull(s.details.id,e)},domProps:{value:s.details.id}},[t._v("\n                  "+t._s(s.name)+"\n                  "),"0.00"!==s.details.price?n("span",[t._v("\n                    ("+t._s(t._f("currency")(s.details.price))+")\n                  ")]):t._e(),s.details.duration>1?n("span",[t._v("\n                    ("+t._s(s.details.duration)+" periods)\n                  ")]):t._e(),t.sizeInfoForOffering(t.event.id,s.details.id)?n("span",[t._v("\n                    ("+t._s(t.sizeInfoText(s.details.id,e))+")\n                  ")]):t._e()])}),0)])])])])}),0)]),n("div",{staticClass:"field is-grouped"},[n("div",{staticClass:"control"},[n("button",{staticClass:"button is-primary",class:{"is-loading":t.saving},attrs:{disabled:t.saving},on:{click:function(e){return t.setAssignments()}}},[t._v("Save Assignments")])]),n("div",{staticClass:"control"},[n("button",{staticClass:"button",attrs:{disabled:t.saving},on:{click:function(e){return t.$emit("done")}}},[t._v("Cancel")])])])])},i=[],r=(n("ac6a"),n("c5f6"),n("7514"),n("2ef0")),a=n.n(r),o=n("25cf"),c={props:{scout:{type:Object,required:!0},event:{type:Object,required:!0},preferences:{type:Array,default:function(){return[]}},registration:{type:Object,require:!0},classes:{type:Array,default:function(){return[]}}},data:function(){return{assignments:[],saving:!1}},computed:{sortedOfferings:function(){return a.a.orderBy(this.event.offerings,"name")}},methods:{classFull:function(t,e){return this.sizeInfoForOffering(this.event.id,t)[e]>=this.sizeInfoForOffering(this.event.id,t).size_limit},maybeRespondToDuration:function(t){var e=a.a.find(this.event.offerings,function(e){return e.details.id===Number(t)});!e||e.details.duration<2||(this.assignments[1]=t,this.assignments[2]=t)},offered:function(t,e){var n=a.a.find(this.event.offerings,function(e){return e.details.id===t});return a.a.indexOf(n.details.periods,e)>=0},setAssignments:function(){var t=this;this.saving=!0;var e=[];a.a.forEach(this.assignments,function(n,s){if(n){var i=a.a.find(e,{offering:n}),r=a.a.find(t.registration.assignments,{offering_id:n});i?i.periods.push(s+1):e.push({periods:[s+1],offering:n,completions:r&&r.details.completions||[]})}}),this.$store.dispatch("setAssignments",{scoutId:this.scout.scout_id,registrationId:this.registration.id,assignments:e,eventId:this.event.id}).then(function(){t.loadClasses(t.event.id)}).then(function(){t.error="",t.$emit("done")}).catch(function(){t.error="Failed to save assignments. Please refresh and try again"}).then(function(){t.saving=!1})},sizeInfoText:function(t,e){return"".concat(this.sizeInfoForOffering(this.event.id,t)[e]," of ").concat(this.sizeInfoForOffering(this.event.id,t).size_limit)}},mounted:function(){var t=[null,null,null];a.a.forEach(this.registration.assignments,function(e){return a.a.forEach(e.details.periods,function(n){t[Number(n)-1]=e.offering_id})}),this.assignments=t},mixins:[o["a"]]},u=c,l=(n("56b9"),n("2877")),d=Object(l["a"])(u,s,i,!1,null,"69366fcd",null);e["a"]=d.exports},"89e8":function(t,e,n){"use strict";var s=n("e660"),i=n.n(s);i.a},"9bc6":function(t,e,n){},b633:function(t,e,n){"use strict";n("7f7f"),n("c5f6"),n("ac6a");var s=n("2ef0"),i=n.n(s);e["a"]={props:{registration:{type:Object,required:!0},event:{type:Object,required:!0}},computed:{assignments:function(){return this.registration.assignments},assignmentList:function(){var t=[null,null,null];return i.a.forEach(this.registration.assignments,function(e){return i.a.forEach(e.details.periods,function(n){t[Number(n)-1]=e})}),t},scout:function(){return this.registration.scout},preferences:function(){return i.a.orderBy(this.registration.preferences,["details.rank"])},purchases:function(){return this.registration.purchases},registrationAssignments:function(){return i.a.map(i.a.omitBy(this.assignmentList,i.a.isNil),function(t){return{name:t.badge.name,price:t.price,periods:t.details.periods}})},registrationPreferences:function(){return i.a.map(this.preferences,function(t){return{name:t.badge.name,price:t.price}})},registrationPurchases:function(){return i.a.map(this.purchases,function(t){return{price:t.price,size:t.details.size,item:t.item,quantity:t.details.quantity,id:t.id}})}}}},bfe9:function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",t._l(t.registrations,function(e){return n("attendance-row",{key:e.id,attrs:{registration:e,event:t.event}})}),1)},i=[],r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"attendance-row"},[n("h5",{staticClass:"title is-5"},[t._v("\n    Attendance Information for "+t._s(t.scout.fullname)+"\n  ")]),n("div",[n("scout-registration",{attrs:{event:t.event,preferences:t.registrationPreferences,purchases:t.registrationPurchases,assignments:t.assignmentList,showProjectedCost:!1,showPreferences:!1}},[n("p",{attrs:{slot:"assignment-notification"},slot:"assignment-notification"},[t._v("\n        "+t._s(t.scout.fullname)+" has not yet been assigned any merit badges for\n        MBU "+t._s(t.event.semester)+" "+t._s(t.event.year)+".\n      ")])])],1)])},a=[],o=n("3121"),c=n("b633"),u={components:{ScoutRegistration:o["a"]},mixins:[c["a"]]},l=u,d=(n("89e8"),n("2877")),f=Object(d["a"])(l,r,a,!1,null,"90c1546c",null),g=f.exports,v={props:{event:{type:Object,required:!0},registrations:{type:Array,required:!0}},components:{AttendanceRow:g}},_=v,p=Object(d["a"])(_,s,i,!1,null,null,null);e["default"]=p.exports},d94f:function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.loading||t.eventLoading?n("spinner-page"):n("div",[n("div",{staticClass:"section"},[n("h3",{staticClass:"title is-3"},[t._v(t._s(t.scout.fullname))]),n("h5",{staticClass:"subtitle is-5"},[t._v(" Troop "+t._s(t.scout.troop))])]),t.editScout?n("scout-edit",{attrs:{scout:t.scout},on:{close:function(e){return t.closeAndRefresh()}}}):t._e(),t.editScout?t._e():n("div",{staticClass:"section columns"},[n("div",{staticClass:"column is-6"},[n("h5",{staticClass:"title is-5"},[t._v("\n          Scout Information\n          "),n("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Edit Scout",expression:"'Edit Scout'"}],staticClass:"button is-small is-white",on:{click:function(e){return t.toggleEditScout()}}},[t._m(0)])]),n("ul",[n("li",[n("strong",[t._v("First Name: ")]),t._v(t._s(t.scout.firstname)+"\n          ")]),n("li",[n("strong",[t._v("Last Name: ")]),t._v(t._s(t.scout.lastname)+"\n          ")]),n("li",[n("strong",[t._v("Birthday: ")]),t._v(t._s(t._f("shortDate")(t.scout.birthday))+"\n          ")]),n("li",[n("strong",[t._v("Age: ")]),t._v(t._s(t.scout.age)+"\n          ")]),n("li",[n("strong",[t._v("Date Added: ")]),t._v(t._s(t._f("shortDate")(t.scout.created_at))+"\n          ")]),n("li",[n("strong",[t._v("Notes: ")]),t._v(t._s(t.scout.notes)+"\n          ")]),n("li",[n("strong",[t._v("Emergency Contact: ")]),t._v(t._s(t.scout.emergency_name)+"\n          ")]),n("li",[n("strong",[t._v("Relationship to Scout: ")]),t._v(t._s(t.scout.emergency_relation)+"\n          ")]),n("li",[n("strong",[t._v("Emergency Number: ")]),t._v(t._s(t.scout.emergency_phone)+"\n          ")])])]),t.scout.user?n("div",{staticClass:"column is-6"},[n("h5",{staticClass:"title is-5"},[t._v("Coordinator Information")]),n("ul",[n("li",[n("strong",[t._v("Name: ")]),t._v(t._s(t.scout.user.fullname)+"\n          ")]),n("li",[n("strong",[t._v("Email: ")]),t._v(t._s(t.scout.user.email)+"\n          ")]),n("li",[n("strong",[t._v("Council: ")]),t._v(t._s(t.scout.user.details.council)+"\n          ")]),n("li",[n("strong",[t._v("District: ")]),t._v(t._s(t.scout.user.details.district)+"\n          ")]),n("li",[n("strong",[t._v("Troop: ")]),t._v(t._s(t.scout.user.details.troop)+"\n          ")])])]):t._e()]),n("div",{staticClass:"section"},[t.loadingRegistrations?n("spinner-page"):n("div",[n("h5",{staticClass:"title is-5"},[t._v("Registration Information")]),t.registrations.length>0?n("div",t._l(t.orderedRegistrations,function(e){return n("registration-container",{key:e.id,staticClass:"registration",attrs:{scout:t.scout,event:t.eventForId(e.event_id),registration:e},on:{done:function(e){return t.reloadRegistrations()}}})}),1):n("div",{staticClass:"notification"},[t._v("\n          This scout has not registered for any events.\n        ")])])],1)],1)],1)},i=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"icon is-small"},[n("span",{staticClass:"fa fa-edit",attrs:{"aria-label":"Edit"}})])}],r=(n("7514"),n("cebc")),a=n("bc3a"),o=n.n(a),c=n("2ef0"),u=n.n(c),l=n("2f62"),d=n("7c19"),f=n("3fab"),g=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.loading?n("spinner-page"):n("div",[n("h5",{staticClass:"title is-5"},[t._v("\n      "+t._s(t.event.semester)+" "+t._s(t.event.year)+"\n      "),t.editing?t._e():n("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Edit Assignments",expression:"'Edit Assignments'"}],staticClass:"is-white button is-small",on:{click:function(e){return e.preventDefault(),t.toggleEditing()}}},[t._m(0)])]),t.editing?n("assignment-edit",{attrs:{scout:t.scout,event:t.event,preferences:t.registration.preferences,registration:t.registration},on:{done:function(e){return t.toggleEditing()}}}):n("scout-registration",{attrs:{event:t.event,preferences:t.registrationPreferences,purchases:t.registrationPurchases,assignments:t.assignmentList}})],1)],1)},v=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"icon is-small"},[n("span",{staticClass:"fa fa-edit",attrs:{"aria-label":"Edit Assignments"}})])}],_=(n("ac6a"),n("5df3"),n("795b")),p=n.n(_),m=n("3121"),h=n("7e7b"),b=n("b633"),y=n("25cf"),C={data:function(){return{editing:!1,error:"",loading:!1}},methods:{toggleEditing:function(){this.editing=!this.editing,this.editing||this.$emit("done")},maybeLoadClasses:function(t){var e=this;return new p.a(function(n,s){e.hasClassInfoForEvent(t)&&n(),e.$store.dispatch("getClasses",t).then(function(n){return e.getSizesForBadges(t,u.a.map(n,"badge.badge_id"))}).then(function(){return n()}).catch(function(){return s()})})}},components:{AssignmentEdit:h["a"],ScoutRegistration:m["a"]},mounted:function(){var t=this;this.loading=!0,p.a.all([this.$store.dispatch("getRegistrations",this.event.id),this.maybeLoadClasses(this.event.id)]).then(function(){t.error=""}).catch(function(){t.error="Failed to load registration information."}).then(function(){t.loading=!1})},mixins:[b["a"],y["a"]]},E=C,O=n("2877"),A=Object(O["a"])(E,g,v,!1,null,"278baa64",null),S=A.exports,w=n("53d6"),R={props:{id:{required:!0}},data:function(){return{editScout:!1,error:"",loading:!1,loadingRegistrations:!1,scout:{},registrations:{}}},computed:Object(r["a"])({},Object(l["b"])(["allEvents"]),{orderedRegistrations:function(){return u.a.orderBy(this.registrations,"created_at")}}),created:function(){this.reload()},methods:{closeAndRefresh:function(){this.editScout=!1,this.reload()},eventForId:function(t){return u.a.find(this.allEvents,{id:t})},reload:function(){var t=this;this.loading=!0,o.a.get(f["a"].SCOUTS_URL+this.id).then(function(e){t.scout=e.data,t.scout["id"]=t.scout.scout_id,t.scout["user_id"]=t.scout.user.user_id,t.error="",t.reloadRegistrations()}).catch(function(){t.error="Failed to get details for this scout."}).then(function(){t.loading=!1})},reloadRegistrations:function(){var t=this;return this.loadingRegistrations=!0,o.a.get(f["a"].SCOUTS_URL+this.id+"/registrations").then(function(e){t.registrations=e.data,t.error=""}).catch(function(){t.error="Failed to get registrations for this scout."}).then(function(){t.loadingRegistrations=!1})},toggleEditScout:function(){this.editScout=!this.editScout}},watch:{$route:function(){this.reload()}},components:{RegistrationContainer:S,ScoutEdit:w["a"]},mixins:[d["a"]]},I=R,$=(n("4a2c"),Object(O["a"])(I,s,i,!1,null,"7cb1a14c",null));e["default"]=$.exports},e660:function(t,e,n){},efd8:function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.isList?n("h4",{staticClass:"title is-4"},[t._v("All Scouts")]):n("h4",{staticClass:"title is-4"},[n("router-link",{attrs:{to:"/administration/scouts/list/all"}},[t._v("\n      All Scouts\n    ")]),t._v("\n    / Scout Detail\n  ")],1),n("router-view")],1)},i=[],r=/.*all\/?$/,a={computed:{isList:function(){return r.test(this.$route.path)}}},o=a,c=n("2877"),u=Object(c["a"])(o,s,i,!1,null,null,null);e["default"]=u.exports}}]);
//# sourceMappingURL=scouts.1b6b0eb0.js.map