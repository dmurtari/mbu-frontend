(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{"/yyi":function(t,e,r){"use strict";var a=r("ta7f"),s=(r("Sy8b"),{data:function(){return{password:"",passwordConfirmation:""}},props:{sending:{type:Boolean,required:!0},error:{type:String,required:!1},showCancel:{type:Boolean,default:!1}},methods:{cancel:function(){this.$emit("cancel")},resetPassword:function(){this.$emit("resetPassword",this.password)}},validations:{password:{required:a.required,minLength:Object(a.minLength)(8)},passwordConfirmation:{required:a.required,sameAs:Object(a.sameAs)("password")}}}),i=r("KHd+"),o=Object(i.a)(s,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("form",[t.error?r("div",{staticClass:"notification is-danger"},[t._v("\n      "+t._s(t.error)+"\n    ")]):t._e(),t._v(" "),r("p",{staticClass:"subtitle"},[t._v("\n      Enter the new password you would like to use to login to your account.\n    ")]),t._v(" "),r("div",{staticClass:"field"},[r("label",{staticClass:"label",attrs:{for:"reset-password"}},[t._v("\n        New password\n      ")]),t._v(" "),r("div",{staticClass:"control"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"input",class:{"is-danger":t.$v.password.$error},attrs:{type:"password",id:"reset-password",required:""},domProps:{value:t.password},on:{blur:t.$v.password.$touch,input:function(e){e.target.composing||(t.password=e.target.value)}}})]),t._v(" "),t.$v.password.$error?r("span",[t.$v.password.minLength?t._e():r("span",{staticClass:"help is-danger"},[t._v("\n          Password must be at least 8 characters long\n        ")]),t._v(" "),t.$v.password.required?t._e():r("span",{staticClass:"help is-danger"},[t._v("\n          Please provide your new password\n        ")])]):t._e()]),t._v(" "),r("div",{staticClass:"field"},[r("label",{staticClass:"label",attrs:{for:"reset-confirm"}},[t._v("\n        Confirm your password\n      ")]),t._v(" "),r("div",{staticClass:"control"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.passwordConfirmation,expression:"passwordConfirmation"}],staticClass:"input",class:{"is-danger":t.$v.passwordConfirmation.$error},attrs:{type:"password",id:"reset-confirm",required:""},domProps:{value:t.passwordConfirmation},on:{blur:t.$v.passwordConfirmation.$touch,input:function(e){e.target.composing||(t.passwordConfirmation=e.target.value)}}})]),t._v(" "),t.$v.passwordConfirmation.$error?r("span",[t.$v.passwordConfirmation.sameAs?t._e():r("span",{staticClass:"help is-danger"},[t._v("\n          Passwords do not match\n        ")]),t._v(" "),t.$v.passwordConfirmation.required?t._e():r("span",{staticClass:"help is-danger"},[t._v("\n          Please confirm your new password\n        ")])]):t._e()]),t._v(" "),r("div",{staticClass:"field is-grouped"},[r("div",{staticClass:"control"},[r("button",{staticClass:"button is-primary",class:{"is-loading":t.sending},attrs:{disabled:t.$v.$invalid||t.sending},on:{click:function(e){e.preventDefault(),t.resetPassword()}}},[t._v("\n          Set Password\n        ")])]),t._v(" "),r("div",{staticClass:"control"},[t.showCancel?r("button",{staticClass:"button",class:{"is-loading":t.sending},attrs:{disabled:t.sending},on:{click:function(e){e.preventDefault(),t.cancel()}}},[t._v("\n          Cancel\n        ")]):t._e()])])])])},[],!1,null,null,null);e.a=o.exports},"4dtP":function(t,e,r){"use strict";r.r(e);var a=r("QbLZ"),s=r.n(a),i=r("L2JU"),o={computed:s()({},Object(i.b)(["profile"]),{fullname:function(){return this.profile.firstname+" "+this.profile.lastname}})},n=r("KHd+"),l=Object(n.a)(o,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"section"},[r("h4",{staticClass:"title is-4"},[t._v("Account Information")]),t._v(" "),r("p",[r("strong",[t._v("Name: ")]),t._v(t._s(t.fullname))]),t._v(" "),r("p",[r("strong",[t._v("Email: ")]),t._v(t._s(t.profile.email))]),t._v(" "),r("p",[r("strong",[t._v("Your Role: ")]),t._v(t._s(t._f("titleCase")(t.profile.role)))]),t._v(" "),t._l(t.profile.details,function(e,a){return r("div",{key:a},[r("p",[r("strong",[t._v(t._s(t._f("titleCase")(a))+": ")]),t._v(t._s(t._f("titleCase")(e)))])])})],2)},[],!1,null,null,null);e.default=l.exports},Cd2t:function(t,e,r){"use strict";r.r(e);var a=r("QbLZ"),s=r.n(a),i=r("/yyi"),o=r("L2JU"),n={computed:s()({},Object(o.b)(["profile"])),data:function(){return{error:"",sending:!1}},methods:{close:function(){this.$router.push("/profile")},resetPassword:function(t){var e=this,r={id:this.profile.id,password:t};this.sending=!0,this.$store.dispatch("updateProfile",r).then(function(){e.error="",e.close()}).catch(function(t){e.error="Failed to reset password. Please try again."}).then(function(){e.sending=!1})}},components:{"change-password":i.a}},l=r("KHd+"),c=Object(l.a)(n,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"section"},[r("h4",{staticClass:"title is-4"},[t._v("Change Your Password")]),t._v(" "),r("change-password",{attrs:{sending:t.sending,error:t.error,showCancel:!0},on:{cancel:function(e){t.close()},resetPassword:function(e){t.resetPassword(e)}}})],1)},[],!1,null,null,null);e.default=c.exports},EdOp:function(t,e,r){"use strict";r.r(e);var a=r("QbLZ"),s=r.n(a),i=r("L2JU"),o={computed:s()({},Object(i.b)(["profile"]),{firstname:function(){return this.profile.firstname},lastname:function(){return this.profile.lastname},role:function(){return this.profile.role},id:function(){return this.profile.id}}),data:function(){return{error:""}},methods:{confirmDelete:function(){var t=this;this.$store.dispatch("deleteAccount",this.id).then(function(){t.error="",t.$router.push("/")}).catch(function(e){t.error="Couldn't delete your account. Please contact an administrator"})},cancel:function(){this.error="",this.$router.push("/profile")}}},n=r("KHd+"),l=Object(n.a)(o,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"section"},[r("h4",{staticClass:"title is-4"},[t._v("Delete Your Account")]),t._v(" "),t.error?r("div",{staticClass:"notification is-danger"},[r("p",[t._v(t._s(t.error))])]):t._e(),t._v(" "),r("confirm-delete",{attrs:{"match-text":this.firstname+" "+this.lastname,placeholder:"Full Name"},on:{deleteSuccess:function(e){t.confirmDelete()},close:function(e){t.cancel()}}},[r("span",{attrs:{slot:"header"},slot:"header"},[t._v("\n      Do you really want to delete your account? This cannot be undone\n    ")]),t._v(" "),r("span",{attrs:{slot:"help-text"},slot:"help-text"},[t._v("\n      Enter your full name (capitalization matters) to confirm deleting your account.\n      "),"coordinator"===t.role?r("b",[t._v("\n        This will also remove all scouts that you have registered, as well as their\n        registration and completion records!\n      ")]):t._e()])])],1)},[],!1,null,null,null);e.default=l.exports},ZKxX:function(t,e,r){},isEk:function(t,e,r){"use strict";r.r(e);var a=r("QbLZ"),s=r.n(a),i=r("L2JU"),o={computed:s()({},Object(i.b)(["profile"])),beforeRouteEnter:function(t,e,r){localStorage.getItem("token")||r(function(t){return t.$router.push("/")}),r()}},n=(r("kIMd"),r("KHd+")),l=Object(n.a)(o,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("h3",{staticClass:"title is-3"},[t._v("Your Profile")]),t._v(" "),r("h5",{staticClass:"subtitle is-5"},[t._v("View and make changes to your profile")]),t._v(" "),r("div",{staticClass:"columns"},[r("div",{staticClass:"column is-3"},[r("aside",{staticClass:"menu"},[r("p",{staticClass:"menu-label"},[t._v("Manage Your Account")]),t._v(" "),r("ul",{staticClass:"menu-list"},[r("router-link",{attrs:{to:"/profile/general"}},[t._v("My Account")]),t._v(" "),r("router-link",{attrs:{to:"/profile/edit"}},[t._v("Edit Account")]),t._v(" "),r("router-link",{attrs:{to:"/profile/password"}},[t._v("Change Password")]),t._v(" "),r("router-link",{attrs:{to:"/profile/delete"}},[t._v("Delete My Account")])],1)])]),t._v(" "),r("div",{staticClass:"column"},[r("router-view")],1)])])},[],!1,null,"2873b895",null);e.default=l.exports},kIMd:function(t,e,r){"use strict";var a=r("ZKxX");r.n(a).a},yxXM:function(t,e,r){"use strict";r.r(e);var a=r("QbLZ"),s=r.n(a),i=r("L2JU"),o=r("ta7f"),n=r("LvDl"),l=r.n(n),c={props:{propProfile:{type:Object},routable:{type:Boolean,default:!0}},data:function(){return{profileUpdate:{firstname:"",lastname:"",teacher:{chapter:""},coordinator:{troop:"",district:"",council:""}},error:"",saving:!1}},computed:s()({},Object(i.b)(["isAdmin","profile"]),{profileToEdit:function(){return this.propProfile?this.propProfile:this.profile}}),methods:{cancel:function(){this.routable?this.$router.push("/profile"):this.$emit("done")},update:function(){var t=this;this.saving=!0;var e={id:this.profileToEdit.id,firstname:this.profileUpdate.firstname,lastname:this.profileUpdate.lastname};switch(this.profileToEdit.role){case"coordinator":e.details=this.profileUpdate.coordinator;break;case"teacher":e.details=this.profileUpdate.teacher}this.$store.dispatch("updateProfile",e).then(function(){t.error="",t.cancel()}).catch(function(e){t.error="Failed to save changes. Please try again."}).then(function(){t.saving=!1})}},mounted:function(){this.profileUpdate.firstname=this.profileToEdit.firstname,this.profileUpdate.lastname=this.profileToEdit.lastname,this.profileUpdate[this.profileToEdit.role]=l.a.clone(this.profileToEdit.details)},validations:{profileUpdate:{firstname:{required:o.required},lastname:{required:o.required},coordinator:{troop:{required:o.required,alphaNum:o.alphaNum},district:{required:o.required},council:{required:o.required}},teacher:{chapter:{required:o.required}}},basicInfo:["profileUpdate.firstname","profileUpdate.lastname"],coordinatorInfo:["profileUpdate.coordinator.troop","profileUpdate.coordinator.district","profileUpdate.coordinator.council"],teacherInfo:["profileUpdate.teacher.chapter"]}},d=r("KHd+"),p=Object(d.a)(c,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"section"},[r("h4",{staticClass:"title is-4"},[t._v("Edit Your Information")]),t._v(" "),r("form",{staticClass:"columns is-multiline"},[t.error?r("div",{staticClass:"notification is-danger"},[t._v("\n      "+t._s(t.error)+"\n    ")]):t._e(),t._v(" "),r("div",{staticClass:"field column is-6"},[r("label",{staticClass:"label",attrs:{for:"edit-firstname"}},[t._v("First Name")]),t._v(" "),r("div",{staticClass:"control"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.profileUpdate.firstname,expression:"profileUpdate.firstname"}],staticClass:"input",class:{"is-danger":t.$v.profileUpdate.firstname.$error},attrs:{type:"text",id:"edit-firstname"},domProps:{value:t.profileUpdate.firstname},on:{blur:t.$v.profileUpdate.firstname.$touch,input:function(e){e.target.composing||t.$set(t.profileUpdate,"firstname",e.target.value)}}})]),t._v(" "),t.$v.profileUpdate.firstname.$error?r("span",{staticClass:"help is-danger"},[t._v("\n        Please enter your first name\n      ")]):t._e()]),t._v(" "),r("div",{staticClass:"field column is-6"},[r("label",{staticClass:"label",attrs:{for:"edit-lastname"}},[t._v("Last Name")]),t._v(" "),r("div",{staticClass:"control"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.profileUpdate.lastname,expression:"profileUpdate.lastname"}],staticClass:"input",class:{"is-danger":t.$v.profileUpdate.lastname.$error},attrs:{type:"text",id:"edit-lastname"},domProps:{value:t.profileUpdate.lastname},on:{blur:t.$v.profileUpdate.lastname.$touch,input:function(e){e.target.composing||t.$set(t.profileUpdate,"lastname",e.target.value)}}})]),t._v(" "),t.$v.profileUpdate.lastname.$error?r("span",{staticClass:"help is-danger"},[t._v("\n        Please enter your last name\n      ")]):t._e()]),t._v(" "),"coordinator"===t.profileToEdit.role?[r("div",{staticClass:"field column is-4"},[r("label",{staticClass:"label",attrs:{for:"edit-troop"}},[t._v("Troop")]),t._v(" "),r("div",{staticClass:"control"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.profileUpdate.coordinator.troop,expression:"profileUpdate.coordinator.troop"}],staticClass:"input",class:{"is-danger":t.$v.profileUpdate.coordinator.troop.$error},attrs:{type:"number",id:"edit-troop",placeholder:"Troop"},domProps:{value:t.profileUpdate.coordinator.troop},on:{blur:t.$v.profileUpdate.coordinator.troop.$touch,input:function(e){e.target.composing||t.$set(t.profileUpdate.coordinator,"troop",e.target.value)}}})]),t._v(" "),t.$v.profileUpdate.coordinator.troop.$error?r("span",{staticClass:"help is-danger"},[t._v("\n          Please enter the troop you are representing\n        ")]):t._e()]),t._v(" "),r("div",{staticClass:"field column is-4"},[r("label",{staticClass:"label",attrs:{for:"edit-district"}},[t._v("District")]),t._v(" "),r("div",{staticClass:"control"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.profileUpdate.coordinator.district,expression:"profileUpdate.coordinator.district"}],staticClass:"input",class:{"is-danger":t.$v.profileUpdate.coordinator.district.$error},attrs:{type:"text",id:"edit-district",placeholder:"District"},domProps:{value:t.profileUpdate.coordinator.district},on:{blur:t.$v.profileUpdate.coordinator.district.$touch,input:function(e){e.target.composing||t.$set(t.profileUpdate.coordinator,"district",e.target.value)}}})]),t._v(" "),t.$v.profileUpdate.coordinator.district.$error?r("span",{staticClass:"help is-danger"},[t._v("\n          Please enter your district\n        ")]):t._e()]),t._v(" "),r("div",{staticClass:"field column is-4"},[r("label",{staticClass:"label",attrs:{for:"edit-council"}},[t._v("Council")]),t._v(" "),r("div",{staticClass:"control"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.profileUpdate.coordinator.council,expression:"profileUpdate.coordinator.council"}],staticClass:"input",class:{"is-danger":t.$v.profileUpdate.coordinator.council.$error},attrs:{type:"text",id:"edit-council",placeholder:"Council"},domProps:{value:t.profileUpdate.coordinator.council},on:{blur:t.$v.profileUpdate.coordinator.council.$touch,input:function(e){e.target.composing||t.$set(t.profileUpdate.coordinator,"council",e.target.value)}}})]),t._v(" "),t.$v.profileUpdate.coordinator.council.$error?r("span",{staticClass:"help is-danger"},[t._v("\n          Please enter your council\n        ")]):t._e()])]:t._e(),t._v(" "),"teacher"===t.profileToEdit.role?[r("div",{staticClass:"field column is-12"},[r("label",{staticClass:"label",attrs:{for:"edit-chapter"}},[t._v("Chapter/Organization")]),t._v(" "),r("div",{staticClass:"control"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.profileUpdate.teacher.chapter,expression:"profileUpdate.teacher.chapter"}],staticClass:"input",class:{"is-danger":t.$v.profileUpdate.teacher.chapter.$error},attrs:{type:"text",id:"edit-chapter",placeholder:"Your group"},domProps:{value:t.profileUpdate.teacher.chapter},on:{blur:t.$v.profileUpdate.teacher.chapter.$touch,input:function(e){e.target.composing||t.$set(t.profileUpdate.teacher,"chapter",e.target.value)}}})]),t._v(" "),t.$v.profileUpdate.teacher.chapter.$error?r("span",{staticClass:"help is-danger"},[t._v("\n          Please enter the group you are affiliated with (e.g. APO chapter)\n        ")]):t._e()])]:t._e(),t._v(" "),r("div",{staticClass:"column is-12"},[r("div",{staticClass:"field is-grouped"},[r("div",{staticClass:"control"},[r("button",{staticClass:"button is-primary",class:{"is-loading":t.saving},attrs:{disabled:t.saving,id:"save-profile"},on:{click:function(e){e.preventDefault(),t.update()}}},[t._v("\n            Save Changes\n          ")])]),t._v(" "),r("div",{staticClass:"control"},[r("button",{staticClass:"button",attrs:{disabled:t.saving,id:"cancel"},on:{click:function(e){e.preventDefault(),t.cancel()}}},[t._v("\n            Cancel\n          ")])])])])],2)])},[],!1,null,null,null);e.default=p.exports}}]);
//# sourceMappingURL=profile.b9235c1a2686d575891d.js.map