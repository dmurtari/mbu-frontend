(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"42u/":function(t,e,i){"use strict";var r=i("kVvk");i.n(r).a},CZ8T:function(t,e,i){"use strict";i.r(e);var r=i("vDqi"),a=i.n(r),o=i("yxXM"),s=i("P6sX"),n={props:{id:{required:!0}},data:function(){return{editing:!1,error:"",loading:!1,user:{}}},methods:{toggleEdit:function(){this.editing=!this.editing,this.editing||this.loadData()},dismissError:function(){this.error=""},loadData:function(){var t=this;this.loading=!0,a.a.get(s.a.USERS_URL+this.id+"/scouts").then(function(e){t.user=e.data[0],t.error=""}).catch(function(){t.error="Failed to get user details. Please refresh or try again later."}).then(function(){t.loading=!1})}},created:function(){this.loadData()},components:{"edit-profile":o.default}},l=(i("42u/"),i("KHd+")),d=Object(l.a)(n,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.error?i("closable-error",{on:{dismissed:function(e){t.dismissError()}}},[t._v(t._s(t.error))]):t._e(),t._v(" "),t.loading?i("spinner-page"):i("div",[t.editing?[i("edit-profile",{attrs:{propProfile:t.user,routable:!1},on:{done:function(e){t.toggleEdit()}}})]:[i("div",{staticClass:"section"},[i("h3",{staticClass:"title is-3"},[t._v("\n          "+t._s(t.user.firstname)+" "+t._s(t.user.lastname)+"\n          "),i("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Edit User Profile",expression:"'Edit User Profile'"}],staticClass:"button is-white is-medium",attrs:{id:"edit-user-button"},on:{click:function(e){t.toggleEdit()}}},[i("span",{staticClass:"icon is-large"},[i("span",{staticClass:"fa fa-edit fa-lg",attrs:{"aria-label":"Edit"}})])])]),t._v(" "),t.user.details.troop?i("h5",{staticClass:"subtitle is-5"},[t._v("\n          Troop "+t._s(t.user.details.troop)+", "+t._s(t.user.details.district)+" District, "+t._s(t.user.details.council)+" Council\n        ")]):t._e()]),t._v(" "),i("div",{staticClass:"section"},[i("h5",{staticClass:"title is-5"},[t._v("User Details")]),t._v(" "),i("ul",[i("li",[i("strong",[t._v("Email: ")]),t._v(" "+t._s(t.user.email)+"\n          ")]),t._v(" "),i("li",[i("strong",[t._v("User Since: ")]),t._v(" "+t._s(t._f("shortDate")(t.user.created_at))+"\n          ")])])]),t._v(" "),i("div",{staticClass:"section"},[i("h5",{staticClass:"title is-5"},[t._v("Scouts")]),t._v(" "),t.user.scouts.length<1?i("div",{staticClass:"notification"},[t._v("\n          This user has not yet added any scouts to their troop.\n        ")]):i("table",{staticClass:"table is-striped is-fullwidth"},[i("thead",[i("tr",[i("th",[t._v("Name")]),t._v(" "),i("th",[t._v("Birthday")]),t._v(" "),i("th",[t._v("Emergency Contact")]),t._v(" "),i("th",[t._v("Emergency Phone")]),t._v(" "),i("th")])]),t._v(" "),i("tbody",t._l(t.user.scouts,function(e){return i("tr",{key:e.id},[i("td",[t._v(t._s(e.firstname)+" "+t._s(e.lastname))]),t._v(" "),i("td",[t._v(t._s(t._f("shortDate")(e.birthday)))]),t._v(" "),i("td",[t._v(t._s(e.emergency_name)+" ("+t._s(e.emergency_relation)+")")]),t._v(" "),i("td",[t._v(t._s(e.emergency_phone))]),t._v(" "),i("td",[i("router-link",{attrs:{to:"/administration/scouts/list/"+e.id}},[t._v("Details")])],1)])}))])])]],2)],1)},[],!1,null,"47f1380a",null);e.default=d.exports},kVvk:function(t,e,i){},yxXM:function(t,e,i){"use strict";i.r(e);var r=i("QbLZ"),a=i.n(r),o=i("L2JU"),s=i("ta7f"),n=i("LvDl"),l=i.n(n),d={props:{propProfile:{type:Object},routable:{type:Boolean,default:!0}},data:function(){return{profileUpdate:{firstname:"",lastname:"",teacher:{chapter:""},coordinator:{troop:"",district:"",council:""}},error:"",saving:!1}},computed:a()({},Object(o.b)(["isAdmin","profile"]),{profileToEdit:function(){return this.propProfile?this.propProfile:this.profile}}),methods:{cancel:function(){this.routable?this.$router.push("/profile"):this.$emit("done")},update:function(){var t=this;this.saving=!0;var e={id:this.profileToEdit.id,firstname:this.profileUpdate.firstname,lastname:this.profileUpdate.lastname};switch(this.profileToEdit.role){case"coordinator":e.details=this.profileUpdate.coordinator;break;case"teacher":e.details=this.profileUpdate.teacher}this.$store.dispatch("updateProfile",e).then(function(){t.error="",t.cancel()}).catch(function(e){t.error="Failed to save changes. Please try again."}).then(function(){t.saving=!1})}},mounted:function(){this.profileUpdate.firstname=this.profileToEdit.firstname,this.profileUpdate.lastname=this.profileToEdit.lastname,this.profileUpdate[this.profileToEdit.role]=l.a.clone(this.profileToEdit.details)},validations:{profileUpdate:{firstname:{required:s.required},lastname:{required:s.required},coordinator:{troop:{required:s.required,alphaNum:s.alphaNum},district:{required:s.required},council:{required:s.required}},teacher:{chapter:{required:s.required}}},basicInfo:["profileUpdate.firstname","profileUpdate.lastname"],coordinatorInfo:["profileUpdate.coordinator.troop","profileUpdate.coordinator.district","profileUpdate.coordinator.council"],teacherInfo:["profileUpdate.teacher.chapter"]}},c=i("KHd+"),p=Object(c.a)(d,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"section"},[i("h4",{staticClass:"title is-4"},[t._v("Edit Your Information")]),t._v(" "),i("form",{staticClass:"columns is-multiline"},[t.error?i("div",{staticClass:"notification is-danger"},[t._v("\n      "+t._s(t.error)+"\n    ")]):t._e(),t._v(" "),i("div",{staticClass:"field column is-6"},[i("label",{staticClass:"label",attrs:{for:"edit-firstname"}},[t._v("First Name")]),t._v(" "),i("div",{staticClass:"control"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.profileUpdate.firstname,expression:"profileUpdate.firstname"}],staticClass:"input",class:{"is-danger":t.$v.profileUpdate.firstname.$error},attrs:{type:"text",id:"edit-firstname"},domProps:{value:t.profileUpdate.firstname},on:{blur:t.$v.profileUpdate.firstname.$touch,input:function(e){e.target.composing||t.$set(t.profileUpdate,"firstname",e.target.value)}}})]),t._v(" "),t.$v.profileUpdate.firstname.$error?i("span",{staticClass:"help is-danger"},[t._v("\n        Please enter your first name\n      ")]):t._e()]),t._v(" "),i("div",{staticClass:"field column is-6"},[i("label",{staticClass:"label",attrs:{for:"edit-lastname"}},[t._v("Last Name")]),t._v(" "),i("div",{staticClass:"control"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.profileUpdate.lastname,expression:"profileUpdate.lastname"}],staticClass:"input",class:{"is-danger":t.$v.profileUpdate.lastname.$error},attrs:{type:"text",id:"edit-lastname"},domProps:{value:t.profileUpdate.lastname},on:{blur:t.$v.profileUpdate.lastname.$touch,input:function(e){e.target.composing||t.$set(t.profileUpdate,"lastname",e.target.value)}}})]),t._v(" "),t.$v.profileUpdate.lastname.$error?i("span",{staticClass:"help is-danger"},[t._v("\n        Please enter your last name\n      ")]):t._e()]),t._v(" "),"coordinator"===t.profileToEdit.role?[i("div",{staticClass:"field column is-4"},[i("label",{staticClass:"label",attrs:{for:"edit-troop"}},[t._v("Troop")]),t._v(" "),i("div",{staticClass:"control"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.profileUpdate.coordinator.troop,expression:"profileUpdate.coordinator.troop"}],staticClass:"input",class:{"is-danger":t.$v.profileUpdate.coordinator.troop.$error},attrs:{type:"number",id:"edit-troop",placeholder:"Troop"},domProps:{value:t.profileUpdate.coordinator.troop},on:{blur:t.$v.profileUpdate.coordinator.troop.$touch,input:function(e){e.target.composing||t.$set(t.profileUpdate.coordinator,"troop",e.target.value)}}})]),t._v(" "),t.$v.profileUpdate.coordinator.troop.$error?i("span",{staticClass:"help is-danger"},[t._v("\n          Please enter the troop you are representing\n        ")]):t._e()]),t._v(" "),i("div",{staticClass:"field column is-4"},[i("label",{staticClass:"label",attrs:{for:"edit-district"}},[t._v("District")]),t._v(" "),i("div",{staticClass:"control"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.profileUpdate.coordinator.district,expression:"profileUpdate.coordinator.district"}],staticClass:"input",class:{"is-danger":t.$v.profileUpdate.coordinator.district.$error},attrs:{type:"text",id:"edit-district",placeholder:"District"},domProps:{value:t.profileUpdate.coordinator.district},on:{blur:t.$v.profileUpdate.coordinator.district.$touch,input:function(e){e.target.composing||t.$set(t.profileUpdate.coordinator,"district",e.target.value)}}})]),t._v(" "),t.$v.profileUpdate.coordinator.district.$error?i("span",{staticClass:"help is-danger"},[t._v("\n          Please enter your district\n        ")]):t._e()]),t._v(" "),i("div",{staticClass:"field column is-4"},[i("label",{staticClass:"label",attrs:{for:"edit-council"}},[t._v("Council")]),t._v(" "),i("div",{staticClass:"control"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.profileUpdate.coordinator.council,expression:"profileUpdate.coordinator.council"}],staticClass:"input",class:{"is-danger":t.$v.profileUpdate.coordinator.council.$error},attrs:{type:"text",id:"edit-council",placeholder:"Council"},domProps:{value:t.profileUpdate.coordinator.council},on:{blur:t.$v.profileUpdate.coordinator.council.$touch,input:function(e){e.target.composing||t.$set(t.profileUpdate.coordinator,"council",e.target.value)}}})]),t._v(" "),t.$v.profileUpdate.coordinator.council.$error?i("span",{staticClass:"help is-danger"},[t._v("\n          Please enter your council\n        ")]):t._e()])]:t._e(),t._v(" "),"teacher"===t.profileToEdit.role?[i("div",{staticClass:"field column is-12"},[i("label",{staticClass:"label",attrs:{for:"edit-chapter"}},[t._v("Chapter/Organization")]),t._v(" "),i("div",{staticClass:"control"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.profileUpdate.teacher.chapter,expression:"profileUpdate.teacher.chapter"}],staticClass:"input",class:{"is-danger":t.$v.profileUpdate.teacher.chapter.$error},attrs:{type:"text",id:"edit-chapter",placeholder:"Your group"},domProps:{value:t.profileUpdate.teacher.chapter},on:{blur:t.$v.profileUpdate.teacher.chapter.$touch,input:function(e){e.target.composing||t.$set(t.profileUpdate.teacher,"chapter",e.target.value)}}})]),t._v(" "),t.$v.profileUpdate.teacher.chapter.$error?i("span",{staticClass:"help is-danger"},[t._v("\n          Please enter the group you are affiliated with (e.g. APO chapter)\n        ")]):t._e()])]:t._e(),t._v(" "),i("div",{staticClass:"column is-12"},[i("div",{staticClass:"field is-grouped"},[i("div",{staticClass:"control"},[i("button",{staticClass:"button is-primary",class:{"is-loading":t.saving},attrs:{disabled:t.saving,id:"save-profile"},on:{click:function(e){e.preventDefault(),t.update()}}},[t._v("\n            Save Changes\n          ")])]),t._v(" "),i("div",{staticClass:"control"},[i("button",{staticClass:"button",attrs:{disabled:t.saving,id:"cancel"},on:{click:function(e){e.preventDefault(),t.cancel()}}},[t._v("\n            Cancel\n          ")])])])])],2)])},[],!1,null,null,null);e.default=p.exports}}]);
//# sourceMappingURL=admin-user-detail.f0ec1fc269c0eae33013.js.map